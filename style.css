/* Custom Scrollbar - Tinh tế hơn trên desktop */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #f1f1f1; }
::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

/* Animations */
.fade-in { animation: fadeIn 0.3s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Helpers */
.hidden-section { display: none !important; }
.modal-overlay { background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(4px); }

/* Game Elements */
canvas { background: #222; border-radius: 4px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); display: block; margin: 0 auto; max-width: 100%; }

/* Memory Card Game */
.memory-card { perspective: 1000px; cursor: pointer; }
.memory-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
.memory-card.flipped .memory-card-inner { transform: rotateY(180deg); }
.memory-front, .memory-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.memory-front { background-color: #4f46e5; color: white; transform: rotateY(180deg); }
.memory-back { background-color: #e5e7eb; color: #374151; }

/* Chat Bubbles */
.chat-bubble { position: relative; }
.reaction-bar { display: none; position: absolute; bottom: -30px; right: 0; background: white; padding: 2px; border-radius: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 10; }
.chat-bubble:hover .reaction-bar { display: flex; }

/* Utility */
.no-interaction { pointer-events: none; }
.truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
/* Thêm vào file style.css */

.reaction-container {
    display: flex;
    gap: 2px;
    background: white;
    padding: 2px 6px;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    font-size: 0.75rem;
    cursor: pointer;
    border: 1px solid #e5e7eb;
}

.reaction-picker {
    display: none;
    position: absolute;
    bottom: -40px; 
    right: 0;
    background: white;
    padding: 5px;
    border-radius: 25px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    z-index: 50;
    display: flex;
    gap: 5px;
    animation: popIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.reaction-btn {
    font-size: 1.2rem;
    padding: 2px 5px;
    cursor: pointer;
    transition: transform 0.1s;
}
.reaction-btn:hover { transform: scale(1.3); }

@keyframes popIn {
    from { opacity: 0; transform: scale(0.5) translateY(-10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}

/* Ẩn hiện picker */
.group:hover .reaction-trigger { display: block; }
.reaction-trigger { display: none; }
/* Mobile Optimizations */
@media (max-width: 768px) {
    .safe-area-pb { padding-bottom: env(safe-area-inset-bottom); }
    /* Ẩn scrollbar trên mobile để nhìn gọn hơn nhưng vẫn scroll được */
    ::-webkit-scrollbar { width: 0px; background: transparent; }
}